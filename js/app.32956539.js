(function(e){function t(t){for(var a,i,s=t[0],c=t[1],u=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},1:function(e,t){},"22de":function(e,t,n){"use strict";var a=n("8319"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=(n("034f"),n("2877")),s={},c=Object(i["a"])(s,r,o,!1,null,null,null),u=c.exports,l=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("首頁")]),e._v("| "),n("router-link",{attrs:{to:"/collect"}},[e._v("收藏")])],1),n("router-view")],1)},d=[],f=(n("22de"),{}),v=Object(i["a"])(f,p,d,!1,null,null,null),g=v.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e.videos?n("videoCard",{attrs:{videos:e.videos}}):e._e(),n("div",{staticClass:"text-center"},[n("paginate",{attrs:{"page-count":e.pageCount,"click-handler":e.jumpTo,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],1)],1)},m=[],x=n("5530"),b=(n("96cf"),n("1da1")),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.videos?n("div",{staticClass:"video-wrap m-3 d-flex flex-wrap jc-center"},e._l(e.videos,(function(t,a){return n("div",{key:a,staticClass:"video p-2 mb-4"},[n("div",{staticClass:"h-100"},[n("router-link",{attrs:{to:"/video",tag:"figure"}},[n("img",{attrs:{src:t.snippet.thumbnails.medium.url}}),n("span",{staticClass:"time m-1 p-1 fs-xxs"},[e._v(e._s(e.durationParser(t.contentDetails.duration)))])]),n("div",{staticClass:"d-flex p-1 ai-center"},[n("div",{staticClass:"title ellipsis two-line flex-1"},[e._v(e._s(t.snippet.title))]),n("span",{staticClass:"iconfont pl-2 icon-heart",class:{"icon-heart1":e.IsFav(t.id)},on:{click:function(n){return e.toggleFavorite(t.id)}}})]),n("div",{staticClass:"channel-title p-1"},[e._v(e._s(t.snippet.channelTitle))]),n("div",{staticClass:"d-flex p-1 flex-wrap"},[n("div",{staticClass:"updateTime"},[e._v("上傳日期:"+e._s(e._f("date")(t.snippet.publishedAt)))]),n("div",[e._v("觀看次數: "+e._s(e.views(t.statistics.viewCount)))])])],1)])})),0):e._e()},y=[],w=(n("caad"),n("c975"),n("a434"),n("ac1f"),n("2532"),n("5a0c")),k=n.n(w),_={data:function(){return{ids:JSON.parse(localStorage.getItem("id"))||[]}},filters:{date:function(e){return k()(e).format("YYYY/MM/DD")}},props:{videos:{type:Array,required:!0}},computed:{},methods:{durationParser:function(e){var t=/\d*H/.exec(e),n=/\d*M/.exec(e),a=/\d*S/.exec(e),r=function(e,t,n){var a="",r="",o="";return a=e?/\d*/.exec(e)[0]+":":"",t?(r=/\d*/.exec(t)[0],1===r.length&&(r="0"+r)):r="00",n?(o=/\d*/.exec(n)[0],1===o.length&&(o="0"+o)):o="00",a+r+":"+o};return r(t,n,a)},IsFav:function(e){return this.ids.includes(e)},toggleFavorite:function(e){var t=this.ids;t.indexOf(e)>-1?t.splice(t.indexOf(e),1):t.push(e),localStorage.id=JSON.stringify(t)},views:function(e){var t=this.getDigit(e);return t>=4?Math.floor(e/Math.pow(10,4))+"萬次":t>=8?Math.floor(e/Math.pow(10,8))+"億次":e+"次"},getDigit:function(e){var t=-1;while(e>=1)t++,e/=10;return t}}},O=_,T=(n("c128"),Object(i["a"])(O,P,y,!1,null,null,null)),j=T.exports,C={name:"home",components:{VideoCard:j},data:function(){return{videos:null,pageCount:0,count:12,pageTokenPerPage:{}}},created:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchVideo({part:"snippet,statistics,contentDetails",maxResults:e.count});case 2:n=t.sent,e.videos=n.data.items,e.pageCount=Math.ceil(n.data.pageInfo.totalResults/e.count),localStorage.getItem("pageTokenPerPage")||e.queryPageToken();case 6:case"end":return t.stop()}}),t)})))()},computed:{width:function(){return window.innerWidth}},methods:{jumpTo:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.pageTokenPerPage=JSON.parse(localStorage.pageTokenPerPage),n.next=3,t.fetchVideo({part:"snippet,statistics,contentDetails",maxResults:t.count,pageToken:e-2>=0?t.pageTokenPerPage[e-2].nextPageToken:null});case 3:a=n.sent,t.videos=a.data.items;case 5:case"end":return n.stop()}}),n)})))()},queryPageToken:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=0,t.next=3,e.fetchVideo({maxResults:e.count});case 3:a=t.sent,e.pageTokenPerPage[n++]={nextPageToken:a.data.nextPageToken};case 5:if(!a.data.nextPageToken){t.next=12;break}return t.next=8,e.fetchVideo({maxResults:e.count,pageToken:e.pageTokenPerPage[n-1].nextPageToken});case 8:a=t.sent,e.pageTokenPerPage[n++]={nextPageToken:a.data.nextPageToken,prevPageToken:a.data.prevPageToken},t.next=5;break;case 12:localStorage.setItem("pageTokenPerPage",JSON.stringify(e.pageTokenPerPage));case 13:case"end":return t.stop()}}),t)})))()},fetchVideo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$http.get("videos",{params:Object(x["a"])(Object(x["a"])({chart:"mostPopular",regionCode:"TW"},e),{},{key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"})})}}},S=C,R=Object(i["a"])(S,h,m,!1,null,null,null),M=R.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collect"},[e.videoByPage?n("VideoCard",{attrs:{videos:e.videoByPage}}):e._e(),n("div",{staticClass:"text-center"},[n("paginate",{attrs:{"page-count":e.pageCount,"click-handler":e.jumpTo,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],1)],1)},$=[],D=(n("a15b"),n("fb6a"),{name:"collect",components:{VideoCard:j},data:function(){return{videos:null,pageCount:0,count:12,videoByPage:null}},created:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(localStorage.id),!(n.length<=0)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.fetchFavVideo({id:n.join(",")});case 5:a=t.sent,e.videos=a.data.items,e.pageCount=Math.ceil(a.data.pageInfo.totalResults/e.count),e.videoByPage=e.videos.slice(0,e.count);case 9:case"end":return t.stop()}}),t)})))()},methods:{jumpTo:function(e){this.videoByPage=this.videos.slice((e-1)*this.count,e*this.count)},fetchFavVideo:function(e){return this.$http.get("videos",{params:Object(x["a"])(Object(x["a"])({part:"snippet,statistics,contentDetails"},e),{},{key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"})})}}}),E=D,I=Object(i["a"])(E,V,$,!1,null,null,null),J=I.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-page"},[n("video-player",{attrs:{options:e.videoOptions}}),n("div",{staticClass:"mt-3 text-center"},[e._v(" 預設播放這支影片 ")])],1)},N=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"videoPlayer",staticClass:"video-js"})},F=[],U=n("f0e2"),Y={props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){this.player=Object(U["a"])(this.$refs.videoPlayer,this.options,(function(){console.log("onPlayerReady",this)}))},beforeDestroy:function(){this.player&&this.player.dispose()}},q=Y,z=(n("b6b4"),Object(i["a"])(q,A,F,!1,null,null,null)),W=z.exports,X={name:"VideoPage",components:{VideoPlayer:W},data:function(){return{videoOptions:{autoplay:!0,controls:!0,sources:[{src:"http://vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"}]}}}},H=X,L=Object(i["a"])(H,B,N,!1,null,null,null),G=L.exports;a["a"].use(l["a"]);var K=[{path:"/",component:g,children:[{path:"/",name:"home",component:M},{path:"/collect",name:"collect",component:J},{path:"/video",name:"video",component:G}]}],Q=new l["a"]({mode:"history",routes:K}),Z=Q,ee=(n("78a7"),n("be35"),n("bc3a")),te=n.n(ee),ne=(n("f9e3"),n("8832")),ae=n.n(ne);n("fda2");a["a"].prototype.$http=te.a.create({baseURL:"https://www.googleapis.com/youtube/v3"}),a["a"].component("paginate",ae.a),a["a"].config.productionTip=!1,new a["a"]({router:Z,render:function(e){return e(u)}}).$mount("#app")},"6cdf":function(e,t,n){},"78a7":function(e,t,n){},8319:function(e,t,n){},"85ec":function(e,t,n){},b6b4:function(e,t,n){"use strict";var a=n("6cdf"),r=n.n(a);r.a},be35:function(e,t,n){},bf58:function(e,t,n){},c128:function(e,t,n){"use strict";var a=n("bf58"),r=n.n(a);r.a}});
//# sourceMappingURL=app.32956539.js.map